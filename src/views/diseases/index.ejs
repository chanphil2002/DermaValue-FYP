<% layout('/layout/boilerplate') %>

<!--begin::App Content Header-->
<div class="app-content-header">
  <div class="container-fluid">
    <div class="row">
      <div class="col-sm-6 d-flex align-items-center">
        <h4 class="mb-0 me-3">All Diseases</h4>
        <a href="/diseases/new" class="btn btn-primary btn-sm">
          <i class="bi bi-plus-lg"></i> Create New Disease
        </a>
      </div>
    </div>
  </div>
</div>
<!--end::App Content Header-->

<!--begin::App Content-->
<div class="app-content">
  <!--begin::Container-->
  <div class="container-fluid">
    <div class="card mb-4">
      <div class="card-header border-0">
        <h3 class="card-title">Diseases</h3>
      </div>
      <div class="card-body table-responsive p-0">
        <table class="table table-striped align-middle">
          <thead>
            <tr>
              <th style="width: 20%">Disease ID</th>
              <th style="width: 20%">Name</th>
              <th style="width: 10%">Actions</th>
              <th style="width: 50%">Questions</th>
            </tr>
          </thead>
          <tbody>
            <% diseases.forEach(function(disease) { %>
            <tr>
              <td><%= disease.id %></td>
              <td><%= disease.name %></td>
              <td>
                <a
                  href="/diseases/<%= disease.id %>"
                  class="text-primary d-block mb-2"
                >
                  <i class="bi bi-pencil"></i> Edit
                </a>
              </td>
              <td>
                <% if (disease.prom && disease.prom.questions &&
                disease.prom.questions.length) { %> <%
                disease.prom.questions.forEach(function(q, index) { %>
                <div><%= index + 1 %>. <%= q.question %></div>
                <% }); %> <% } else { %>
                <span class="text-muted">No PROM</span>
                <% } %>
              </td>
            </tr>
            <% }); %>
          </tbody>
        </table>
      </div>
    </div>
    <!-- /.card -->
  </div>
  <!--end::Container-->
</div>
<!--end::App Content-->
